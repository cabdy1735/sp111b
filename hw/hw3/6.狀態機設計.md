# 6.1 有限狀態機概述

有限狀態機（Finite State Machine，FSM）是一種數學模型，用於描述系統或系統組件的行為。它通過表示系統在不同的狀態之間轉換的方式來模擬系統的行為。

有限狀態機由一組狀態、轉換條件和輸出動作組成。它根據當前的狀態和輸入來決定下一個狀態以及相應的輸出。有限狀態機可以分為兩種主要類型：摩爾（Moore）型和米利（Mealy）型。

+ 摩爾（Moore）型有限狀態機：在摩爾型有限狀態機中，輸出僅取決於當前的狀態。每個狀態都有一個預定義的輸出值，當系統轉換到新的狀態時，輸出也相應地改變。

+ 米利（Mealy）型有限狀態機：在米利型有限狀態機中，輸出不僅取決於當前的狀態，還取決於輸入信號。每個狀態都有一個預定義的輸出值，但是在轉換過程中，輸出可能會根據輸入信號的變化而改變。

有限狀態機可以使用狀態圖（State Diagram）或狀態表（State Table）來表示。狀態圖使用狀態之間的連接和箭頭表示狀態轉換，同時在箭頭上標記轉換條件和輸出。狀態表則使用狀態和輸入的組合來表示轉換和輸出。

有限狀態機在設計數位系統、控制系統、通信協議等方面非常有用。它能夠清晰地描述系統的不同行為和轉換，並提供一個形式化的方式來設計和分析系統。在硬件設計中，有限狀態機可以用於設計控制單元、序列邏輯電路和狀態機控制器等。

要設計一個有限狀態機，需要確定系統的狀態集合、輸入信號、輸出信號以及狀態轉換和輸出規則。通過定義這些元素，可以根據具體的需求來建立狀態圖或狀態表，並進行相應的模擬和驗證。
# 6.2 狀態圖與狀態表

狀態圖（State Diagram）和狀態表（State Table）是兩種常用的表示有限狀態機的方式。它們可以用於描述系統的狀態轉換和相應的輸出。

+ 狀態圖：
狀態圖使用狀態、轉換和輸出之間的圖形表示系統的行為。在狀態圖中，狀態用圓形表示，轉換用箭頭表示。每個箭頭上標記著觸發該轉換的條件和相應的輸出。狀態圖還可以包含起始狀態和終止狀態。

下圖是一個簡單的狀態圖示例：

![狀態圖示例](https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Finite_state_machine_example_with_comments.svg/338px-Finite_state_machine_example_with_comments.svg.png)  
[出處](https://dictionary.cambridge.org/zht/translate/)

在這個例子中，狀態圖表示了一個交通信號燈的行為。狀態圖包含三個狀態：紅燈、綠燈和黃燈，以及它們之間的轉換和相應的輸出。

+ 狀態表：
狀態表使用狀態和輸入信號的組合來表示狀態轉換和輸出。它是一個表格，其中每一行表示一個狀態，列表示輸入信號。表格中的元素表示下一個狀態和相應的輸出。

下表是一個簡單的狀態表示例：

| 當前狀態 | 輸入 1 | 輸入 2 | 下一狀態 | 輸出 |
|----------|--------|--------|----------|------|
| 狀態 A   |   0    |   1    | 狀態 B   |   0  |
| 狀態 A   |   1    |   0    | 狀態 C   |   1  |
| 狀態 B   |   0    |   0    | 狀態 A   |   1  |
| 狀態 B   |   1    |   1    | 狀態 D   |   0  |
| 狀態 C   |   0    |   1    | 狀態 D   |   1  |
| 狀態 C   |   1    |   0    | 狀態 B   |   0  |
| 狀態 D   |   0    |   0    | 狀態 C   |   0  |
| 狀態 D   |   1    |   1    | 狀態 A   |   1  |

在這個例子中，狀態表描述了一個有四個狀態的系統，根據不同的輸入信號進行狀態轉換和輸出。每一行表示當前狀態和輸入信號的組合，並指示下一個狀態和相應的輸出。

狀態圖和狀態表是兩種常用的描述有限狀態機的方式。根據具體的設計需求，可以選擇適合的表示方式來描述系統的行為。  
# 6.3 狀態機的建模與實現

狀態機（State Machine）是描述系統行為的一種形式化模型。在設計數字電路、控制系統或軟件程序時，狀態機常被用於描述系統的不同狀態和狀態之間的轉換。

狀態機的建模與實現通常包括以下步驟：

1. 確定系統的狀態：首先，要確定系統的不同狀態。狀態是系統的特定模式或條件，可以根據系統需求和功能來定義。

2. 確定轉換條件：確定在系統的不同狀態之間發生轉換的條件。這些條件可以是輸入信號的特定組合或其他系統內部的觸發條件。

3. 確定輸出：確定每個狀態或狀態轉換所對應的輸出。輸出可以是信號的狀態、設置或重置特定的標誌等。

4. 繪製狀態圖或狀態表：根據確定的狀態、轉換條件和輸出，可以使用狀態圖或狀態表來表示狀態機。狀態圖使用狀態、轉換和輸出之間的圖形表示系統的行為。狀態表使用狀態和輸入信號的組合來表示轉換和輸出。

5. 實現狀態機：根據狀態圖或狀態表，可以使用不同的方式來實現狀態機。在數字電路設計中，可以使用硬體描述語言（如Verilog或VHDL）來實現狀態機。在軟件程序中，可以使用程式語言（如C++、Python或Java）來實現狀態機。

6. 模擬和驗證：實現狀態機後，可以進行模擬和驗證，確保它能夠按照預期工作。使用模擬工具或軟件仿真環境，可以模擬輸入信號的變化並觀察狀態機的行為和輸出。

7. 修訂和優化：根據模擬和驗證的結果，可能需要對狀態機進行修訂和優化，以滿足系統的需求和性能要求。

狀態機的建模與實現是一個迭代的過程，需要不斷評估和調整以確保狀態機能夠正確地描述系統的行為。通過這個過程，可以設計出有效且可靠的狀態機來實現所需的系統功能。


